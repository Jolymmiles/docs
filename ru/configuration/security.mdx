---
title: Параметры безопасности
description: Настройка фильтрации пользователей и функций безопасности
---

## Фильтрация пользователей

Бот включает встроенные функции безопасности для предотвращения злоупотреблений:

### Заблокированные пользователи

Заблокируйте определённые Telegram ID от доступа к боту:

```bash
BLOCKED_TELEGRAM_IDS=123456789,987654321,555555555
```

- Добавьте Telegram ID пользователей, разделённые запятой
- Изменения вступают в силу после перезагрузки
- Полезно для блокировки спамеров или нарушителей

### Белые списки пользователей

Разрешить определённым пользователям обойти проверки безопасности:

```bash
WHITELISTED_TELEGRAM_IDS=111111111,222222222,333333333
```

- Пользователи в белом списке пропускают проверку подозрительных аккаунтов
- Изменения вступают в силу немедленно
- Полезно для служебных аккаунтов или сотрудников

## Обнаружение подозрительных пользователей

Бот автоматически обнаруживает потенциально вредоносные аккаунты:

### Методы обнаружения

1. **Анализ ключевых слов**: Проверяет паттерны фишинга/мошенничества
2. **Проверка имён аккаунтов**: Выявляет подозрительные имена
3. **Комбинированные проверки**: Анализирует опасные комбинации ключевых слов
4. **Распознавание служебных аккаунтов**: Разрешает легитимные аккаунты типа `@CompanySupportAdmin`

### Как это работает

```
Входящий пользователь → Проверка имени → Анализ ключевых слов → 
→ Проверка служебного аккаунта → Решение (Разрешить/Заблокировать)
```

## Пример конфигурации

```bash
# Блокируйте известных спамеров
BLOCKED_TELEGRAM_IDS=123456789,987654321

# Белый список служебного персонала
WHITELISTED_TELEGRAM_IDS=111111111,222222222,333333333
```

## Безопасность API

### Заголовки API Remnawave

Защитите своё соединение с API Remnawave с помощью пользовательских заголовков:

```bash
REMNAWAVE_HEADERS=X-Api-Key:your_api_key;Authorization:Bearer token123
```

**Рекомендации по безопасности:**

- **Защита API ключа**: Используйте надёжные, случайно сгенерированные API ключи
- **Шифрование заголовков**: Всегда передавайте через HTTPS
- **Ротация**: Регулярно обновляйте API ключи в настройках безопасности
- **Аудит**: Логируйте весь доступ к API для мониторинга безопасности

**Распространённые заголовки:**

```bash
# Базовая аутентификация с API ключом
REMNAWAVE_HEADERS=X-Api-Key:your_secret_key

# Множество слоёв аутентификации
REMNAWAVE_HEADERS=X-Api-Key:api_key123;X-Request-Signature:signature_hash
```

Подробнее см. [Конфигурация заголовков Remnawave](../variables/#заголовки-api-remnawave).

## Устранение неполадок

### Легитимные пользователи заблокированы

Если действительные пользователи заблокированы:
1. Добавьте их в WHITELISTED_TELEGRAM_IDS
2. Сообщите о ложном срабатывании на GitHub
3. Проверьте, не совпадают ли имена аккаунтов с паттернами фишинга

### Изменения не вступают в силу

- Перезагрузите бота: `docker compose down && docker compose up -d`
- Проверьте формат переменной окружения
- Проверьте на опечатки в ID
